<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="apple-mobile-web-app-capable" content="yes"/>    <meta name="mobile-web-app-capable" content="yes">    <title>斗地主计分器</title>    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">    <link href="https://cdn.bootcss.com/bootstrap-switch/3.3.4/css/bootstrap3/bootstrap-switch.min.css"          rel="stylesheet">    <link href="http://cdn.bootcss.com/iCheck/1.0.2/skins/all.css" rel="stylesheet">    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no,minimal-ui"></head><style>    .container-fluid {        background-color: darkolivegreen;    }    .title {        font-family: "华文行楷";        font-size: xx-large;    }</style><body><div class="container-fluid p-0 m-0">    <div class="row-fluid">        <div class="span12 alert alert-info rounded p-0 m-1">            <h1 class="text-center title"><i class="fa fa-arrow-down"></i>斗地主计分器 </h1>        </div>    </div>    <div class="row-fluid alert alert-success  p-0 m-1">        <div class="span12">            <div class="row-fluid">                <div class="span12 input-group p-1">                    <div class="btn btn-info btn-block">当前局数 <span class="" id="rounds">100</span>                    </div>                </div>                <div class="span12 input-group dz p-0">                    <div class="col-sm-3 p-0"><span class="card card-info text-center text-white m-1">                        <i class="fa fa-user"></i> 地主</span></div>                    <label class="col-sm-2 p-1 m-1 text-primary card card-outline-info rounded text-center">                        <div><input type="radio" name="dz" value="zx" checked> <label> ZX</label></div>                    </label>                    <label class="col-sm-2 p-1 m-1 text-primary card card-outline-info rounded text-center">                        <div><input type="radio" name="dz" value="ry"> <label> RY</label></div>                    </label>                    <label class="col-sm-2 p-1 m-1 text-primary card card-outline-info rounded text-center">                        <div><input type="radio" name="dz" value="wv"> <label> WV</label></div>                    </label>                </div>            </div>            <div class="row-fluid">                <div class="col-sm-12 input-group p-0 bomb">                    <label class="col-sm-2 m-1 card card-info text-white">炸弹</label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center">                        <div><input type="radio" name="bomb" value="0" checked="checked">0</div>                    </label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center">                        <div><input type="radio" name="bomb" value="1">1</div>                    </label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center">                        <div><input type="radio" name="bomb" value="2">2</div>                    </label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center">                        <div><input type="radio" name="bomb" value="3">3</div>                    </label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center">                        <div><input type="radio" name="bomb" value="4">4</div>                    </label>                </div>                <div class="col-sm-12 input-group bomb">                    <label class="p-1 m-1 col-sm-1 text-danger card card-outline-info rounded text-center ">                        <div><input type="radio" name="bomb" value="5">5</div>                    </label>                    <label class="text-danger col-sm-1 p-1 m-1 card card-outline-info rounded text-center ">                        <div><input type="radio" name="bomb" value="6">6</div>                    </label>                    <label class="text-danger col-sm-1 p-2 m-1 card card-outline-danger rounded text-center ">                        <div class="menpai"><input type="checkbox" name="is_men">闷牌</div>                    </label>                    <label class="text-danger col-sm-1 p-2 m-1 card card-outline-danger rounded text-center ">                        <div class="menpai"><input type="checkbox" name="is_win">地主赢</div>                    </label>                    <button class="p-0 m-1 col-sm-3 btn btn-outline-success font-weight-bold" id="btn-ddz">计分</button>                </div>            </div>        </div>    </div>    <div class="row-fluid alert alert-warning p-0 m-1">        <table class="table table-sm p-0 m-1 text-center  font-weight-bold">            <tr>                <td class="text-primary" id="total_name_0">ZX</td>                <td id="total_score_0">0</td>            </tr>            <tr>                <td class="text-primary" id="total_name_1">RY</td>                <td id="total_score_1">0</td>            </tr>            <tr>                <td class="text-primary" id="total_name_2">WV</td>                <td id="total_score_2">0</td>            </tr>        </table>    </div>    <div class="row-fluid alert alert-danger p-0 m-1" id="my-chart" style="height: 260px;width: auto;"></div></div></body><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/tether/1.4.0/js/tether.min.js"></script><script src="https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script><script src="https://cdn.bootcss.com/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script><script src="https://cdn.bootcss.com/echarts/3.5.4/echarts.min.js"></script><script>    $(document).ready(function () {        window.onload = function () {            if (document.documentElement.scrollHeight <= document.documentElement.clientHeight) {                bodyTag = document.getElementsByTagName('body')[0];                bodyTag.style.height = document.documentElement.clientWidth / screen.width * screen.height + 'px';            }            setTimeout(function () {                window.scrollTo(0, 1)            }, 0);        };        refresh_chart();        $('#btn-ddz').click(function () {            $.ajax({                type: "POST",                url: "/ddz_count",                contentType: "application/json; charset=utf-8",                data: JSON.stringify(GetJsonData()),                dataType: "json",                success: function (message) {                    var myChart = echarts.init($('#my-chart')[0]);                    var t = []                    var i = 0                    for (var n in message['users']) {                        t.push({                                name: n,                                type: 'line',                                symbolSize: 8,                                hoverAnimation: false,                                data: message['users'][n]                            }                        )                        $('#total_name_' + i).text(n);                        $('#total_score_' + i).text(message['users'][n][message['users'][n].length - 1]);                        i++;                    }                    var option = {                        title: {x: 'left'},                        backgroundColor: 'rgb(228,228,228)',                        tooltip: {trigger: 'axis', axisPointer: {animation: false}},                        legend: {data: ['ZX', 'RY', 'WV'], x: 'left'},                        toolbox: {feature: {dataZoom: {yAxisIndex: 'none'}, restore: {}, saveAsImage: {}}},                        axisPointer: {link: {xAxisIndex: 'all'}},                        dataZoom: [{show: true, realtime: true,}],                        grid: [{left: '3%', right: '4%', bottom: '3%', containLabel: true}],                        xAxis: [{                            type: 'category',                            boundaryGap: false,                            axisLine: {onZero: true},                            data: message["date"]                        }],                        yAxis: [{name: '分数', type: 'value'}],                        series: []                    };    // 使用刚指定的配置项和数据显示图表。                    option.series = t                    myChart.setOption(option);                },                error: function (message) {                }            });        });        function refresh_chart() {            $.ajax({                type: "POST",                url: "/ddz_chart",                contentType: "application/json; charset=utf-8",                dataType: "json",                success: function (message) {                    var myChart = echarts.init($('#my-chart')[0]);                    if (message['users']) {                        var t = []                        var i = 0                        for (var n in message['users']) {                            t.push({                                    name: n,                                    type: 'line',                                    symbolSize: 8,                                    hoverAnimation: false,                                    data: message['users'][n]                                }                            )                            $('#total_name_' + i).text(n);                            $('#total_score_' + i).text(message['users'][n][message['users'][n].length - 1]);                            i++;                        }                    }                }            });        }        function GetJsonData() {            var result = '';            $("input[name='dz']").attr("value", function (index, content) {                result += (index === 2) ? content : content + ';';            });            var json = {                "users": result,                "dz": $("input[name='dz']:checked").val(),                "bomb": $("input[name='bomb']:checked").val(),                "is_men": $("input[name='is_men']").is(':checked') ? 1 : 0,                "is_win": $("input[name='is_win']").is(':checked') ? 1 : 0            };            return json;        }        $('.bomb input').iCheck({            radioClass: 'iradio_flat-green'        });        $('.dz div input').iCheck({            radioClass: 'iradio_flat-blue'        });        $('.menpai input').iCheck({            checkboxClass: 'icheckbox_flat-red',            uncheckedClass: '',            uncheckedCheckboxClass: 'icheckbox_flat-blue',            labelHover: false,            cursor: true        });    })    ;</script><script src="https://cdn.bootcss.com/iCheck/1.0.2/icheck.min.js"></script></html>